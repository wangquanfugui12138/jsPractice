<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>

<body>
    <script>
        //全数组排列
        function permute1(input) {
            var permArr = [],
                usedChars = []
            function main(input) {
                var i, ch
                for (i = 0; i < input.length; i++) {
                    ch = input.splice(i, 1)[0]
                    usedChars.push(ch)
                    if (input.length == 0) {
                        permArr.push(usedChars.slice())
                    }

                    main(input)
                    input.splice(i, 0, ch)
                    usedChars.pop()
                }
                return permArr
            }
            // debugger
            return main(input)
        }
        function permute2(arr) {
            if (arr.length == 1)
                return arr
            else if (arr.length == 2)
                return [[arr[0], arr[1]], [arr[1], arr[0]]]
            else {
                var temp = []
                for (var i = 0; i < arr.length; i++) {
                    var save = arr[i]
                    arr.splice(i, 1)//取出arr[i]
                    // debugger
                    var res = permute2(arr)//递归排列arr[0],arr[1],...,arr[i-1],arr[i+1],...,arr[n]
                    arr.splice(i, 0, save)//将arr[j]放入数组，保持原来的位置
                    for (var j = 0; j < res.length; j++) {
                        res[j].push(arr[i])
                        temp.push(res[j])//将arr[j]组合起来
                    }
                }
                return temp
            }
        }
        function permute3(arr) {
            var arr = Array.from(arr),
                result = []

            function main(index = 0) {
                if (index === arr.length - 1) {
                    result.push(arr)
                    return
                }
                for (var i = index; i < arr.length; i++) {
                    swap(arr, index, i)
                    console.log(1, arr, index, i)
                    main(index + 1)
                    console.log(2)
                    swap(arr, index, i)

                }
                return result
            }
            function swap(array, i, j) {
                [array[i], array[j]] = [array[j], array[i]]
            }
            return main()
        }

        console.dir(permute1([5, 3, 7, 1]))
        console.dir(permute2([5, 3, 7, 1]))
        console.dir(permute3([5, 3, 7, 1]))
    </script>
    <script>
        /*数组扁平化*/
        function flatten(arr) {
            const temp = [].concat(arr)
            return temp.reduce((sum, cur) => {
                return sum.concat(
                    Object.prototype.toString.call(cur) === '[object Array]' ? flatten(cur) : cur
                )
            }, [])
        }
        console.log(flatten([/gta/g, [() => { }, 'test']]))
    </script>
    <script>
        function getMost(arr) {
            var obj = [].concat(arr).reduce(
                (sum,cur)=>{
                    sum[cur] ? sum[cur]++ : sum[cur] = 1
                    return sum
                }
            ,{})

            var maxEle = Object.keys(obj)[0],
                max = obj[Object.keys(obj)[0]]

            Object.keys(obj).forEach(key=>{
                max < obj[key] && (max = obj[key],maxEle = key)
            })
            return maxEle
        }
        var arr = [1, 3, 6, 1, 2, 5, 3, 2, 4, 1, 1, 2, 3, 2, 2, 2, 2, 2]
        console.log(getMost(arr))
    </script>
</body>

</html>