<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <script>
        function New(obj) {
            var tmp = {}
            tmp.__proto__ = obj.prototype
            return tmp
        }
        //bind
        Function.prototype._bind = function (ctx) {
            var _this = this,
                preArgs = Array.prototype.slice.call(arguments, 1),
                Fn = function () { },
                main = function () {
                    return _this.apply(ctx || window, preArgs.concat(Array.prototype.slice.call(arguments)))
                }

            Fn.prototype = _this.prototype
            main.prototype = New(Fn)
            return main
        }
        var a = function (xx) { console.log(this.a,xx) }
        a._bind({ a: 'bind' })('bindArg')
        //call
        Function.prototype._call = function (ctx) {
            var ctx = ctx || window
            ctx.fn = this

            var args = []
            for (var i = 1, len = arguments.length; i < len; i++) {
                args.push('arguments[' + i + ']')
            }

            var result = eval('ctx.fn(' + args + ')')

            delete ctx.fn
            return result
        }
        var aa = function (xx) { console.log(this.a,xx) }
        aa._call({ a: 'call' },'callArg')
        //apply
        Function.prototype._apply = function (ctx,arr) {
            var ctx = ctx || window
            ctx.fn = this

            var result
            if (!arr) {
                result = ctx.fn()
            }
            else {
                var args = []
                for (var i = 0, len = arr.length; i < len; i++) {
                    args.push('arr[' + i + ']')
                }
                result = eval('ctx.fn(' + args + ')')
            }

            delete ctx.fn
            return result
        }
        var aaa = function (arr) { console.log(this.a,arr) }
        aaa._apply({ a: 'apply' },['applyArg'])
    </script>
</body>

</html>